<%
# Code Review plugin for Redmine
# Copyright (C) 2009  Haruyuki Iida
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-%>
Review #<%= @review.root.id%> has been updated by <%=h @review.user %>.

<ul>
  <li>
    <%
      status_from = l(:label_review_closed) if @review.status_changed_from == CodeReview::STATUS_CLOSED
      status_from = l(:label_review_open) if @review.status_changed_from == CodeReview::STATUS_OPEN
      status_to = l(:label_review_closed) if @review.status_changed_to == CodeReview::STATUS_CLOSED
      status_to = l(:label_review_open) if @review.status_changed_to == CodeReview::STATUS_OPEN
      if (l(:this_is_checking_for_before_rails_2_2_2) == 'this_is_checking_for_before_rails_2_2_2')
        status_changed_message = l(:text_journal_changed, status_from, status_to)
      else
        status_changed_message = l(:text_journal_changed, :old => status_from, :new => status_to)
      end
    %>
    <%=h status_changed_message %>
  </li>
</ul>

<hr/>

<h1>
<a href="<%= @review_url %>">
  <%=h l(:label_review) %>#<%= @review.root.id %>
</a>
</h1>

<ul>
  <li><%=l(:label_code_reviewer)%>: <%= @review.root.user %></li>
<li>Path: <%= @review.root.path %></li>
<li><%=l(:label_revision)%>: <%= @review.root.revision %></li>
<li><%=l(:label_code_author)%>: <%= @review.root.committer %></li>
</ul>

<div class="wiki">
<%= textilizable @review.root, :comment %>
</div>
